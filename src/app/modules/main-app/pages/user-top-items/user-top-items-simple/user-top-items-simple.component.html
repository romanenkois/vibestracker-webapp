<div class="p-2">
  @if (this.userTopItems() && this.userTopItems().length > 0) {
    <div
      class="grid grid-cols-[repeat(auto-fill,minmax(180px,1fr))] gap-4 sm:grid-cols-[repeat(auto-fill,minmax(240px,1fr))] lg:grid-cols-[repeat(auto-fill,minmax(300px,1fr))]"
    >
      @for (item of this.userTopItems(); track $index) {
        <div class="w-full h-full">
          @switch (this.itemsType()) {
            @case ('albums') {
              <app-card-simple-album
                [album]="$any(item)"
                [index]="$index + 1"
              ></app-card-simple-album>
            }
            @case ('artists') {
              <app-card-simple-artist
                [artist]="$any(item)"
                [index]="$index + 1"
              ></app-card-simple-artist>
            }
            @case ('genres') {
              <app-card-simple-genre></app-card-simple-genre>
            }
            @case ('tracks') {
              <app-card-simple-track
                [track]="$any(item)"
                [index]="$index + 1"
              ></app-card-simple-track>
            }
          }
        </div>
      }
    </div>
    <div class="w-full flex justify-center align-center mt-4">
      @if (this.loadingState() === 'idle' || this.loadingState() === 'resolved') {
        <button class="w-full p-4" (click)="this.loadMoreItems()">
          <p class="font-3xl">load more</p>
        </button>
      } @else if (
        this.loadingState() === 'loading' || this.loadingState() === 'appending'
      ) {
        <p class="font-3xl p-4">loading...</p>
      } @else if (this.loadingState() === 'all-resolved') {
        <p class="font-3xl p-4">all available data is loaded</p>
      } @else {
        <p class="font-3xl p-4">error loading data</p>
      }
    </div>
  }
</div>
